# 업비트 자동매매 봇 🤖

멀티 시그널 기반 단타 매매 자동화 프로그램

## 📋 주요 기능

- ✅ **자동 코인 선정**: 거래량, 변동성 기반으로 최적의 코인 3개 자동 선정
- ✅ **멀티 시그널 전략**: 볼린저밴드, RSI, MACD, 거래량 등 6가지 지표 조합
- ✅ **리스크 관리**: 손절, 분할 익절, 트레일링 스탑
- ✅ **실시간 모니터링**: 거래 상태 실시간 확인
- ✅ **상세 로깅**: 시간별 로그 로테이션, CSV 형식 거래 기록
- ✅ **통계 분석**: 승률, 수익률, MDD 등 상세 통계

## 🚀 설치 방법

### 1. Python 설치
Python 3.8 이상 필요

### 2. 패키지 설치
```bash
pip install -r requirements.txt
```

### 3. API 키 설정
`config.json` 파일에서 업비트 API 키 입력:
```json
{
  "api": {
    "access_key": "YOUR_ACCESS_KEY_HERE",
    "secret_key": "YOUR_SECRET_KEY_HERE"
  }
}
```

## 📖 사용 방법

### 프로그램 실행
```bash
python main.py
```

### 명령어

| 명령어 | 설명 |
|--------|------|
| `start` | 트레이딩 시작 (코인 선정 → 자동 매매) |
| `stop` | 트레이딩 정지 (모든 포지션 청산 후 정지) |
| `status` | 현재 거래 상태 및 통계 표시 |
| `help` | 도움말 표시 |
| `exit` | 프로그램 종료 |

### 실행 예시

```
💻 명령어 입력 > start
🔍 거래 적합 코인 분석 시작...
✅ 업비트 API 연결 성공 | 보유 현금: 1,000,000원

🏆 선정된 거래 코인
  [1] BTC | 거래량: 1,234억 | 변동성: 5.23% | 점수: 87.5
  [2] ETH | 거래량: 987억 | 변동성: 6.12% | 점수: 82.3
  [3] SOL | 거래량: 456억 | 변동성: 4.87% | 점수: 78.1

✅ 트레이딩 시작됨

💻 명령어 입력 > status
📊 현재 거래 상태
▶️  상태: 실행 중
💰 자금 현황
  초기 자금: 1,000,000원
  현재 잔고: 920,000원
  총 평가액: 1,035,000원
  총 수익률: +3.5%
  총 손익: +35,000원
```

## ⚙️ 설정 파일 (config.json)

### 주요 설정값

```json
{
  "trading": {
    "max_coins": 3,                    // 동시 거래 코인 수
    "buy_amount_krw": 100000,          // 1회 매수 금액 (100,000원)
    "check_interval_seconds": 10       // 체크 주기 (초)
  },
  
  "risk_management": {
    "stop_loss_pct": -1.5,             // 손절 -1.5%
    "take_profit_1_pct": 1.5,          // 1차 익절 +1.5%
    "take_profit_2_pct": 3.0,          // 2차 익절 +3.0%
    "trailing_stop_pct": 1.0           // 트레일링 스탑 -1%
  }
}
```

## 📊 로그 파일

### 위치
모든 로그는 `logs/` 디렉토리에 저장됩니다.

### 파일 종류

1. **trading_bot.log** - 시스템 로그
   - 매수/매도 실행 내역
   - 에러 및 경고
   - 24시간마다 로테이션

2. **trades.log** - 거래 상세 로그 (CSV)
   ```
   timestamp,type,coin,price,amount,total_krw,fee,profit_rate,profit_krw,reason,balance_krw
   2024-02-07 14:23:15,BUY,KRW-BTC,60000000,0.00833333,500000,250,0,0,BB하단반등;RSI과매도,500000
   2024-02-07 14:45:22,SELL,KRW-BTC,60900000,0.00833333,507500,253.75,1.5,7250,1차익절,1007500
   ```

3. **statistics.log** - 일일 통계
   - JSON 형식 통계 데이터
   - 일별로 저장

## 📈 전략 설명

### 매수 조건 (6개 중 3개 이상 충족)
1. 볼린저밴드 하단 반등
2. RSI < 35 (과매도)
3. 거래량 급증 (평균의 1.8배 이상)
4. MACD 골든크로스
5. 5일 이평선 상승 전환
6. 볼린저밴드 하위 25% 이내

### 매도 조건
- **손절**: -1.5% 손실
- **1차 익절**: +1.5% 수익 시 50% 매도
- **2차 익절**: +3.0% 수익 시 30% 매도
- **트레일링 스탑**: +2% 이상 수익 후 최고점 대비 -1% 하락 시
- **BB 상단**: 볼린저밴드 상단 도달
- **RSI 과매수**: RSI > 70

## ⚠️ 주의사항

1. **실전 전 테스트**
   - 소액(10-50만원)으로 먼저 테스트
   - 최소 며칠간 모니터링 필수

2. **손실 관리**
   - 손절 설정 절대 무시하지 말 것
   - 하루 최대 손실액 설정 권장

3. **API 키 보안**
   - config.json 파일 절대 공유 금지
   - GitHub 등 공개 저장소 업로드 금지
   - 출금 권한은 부여하지 않기

4. **시장 상황**
   - 급등락장에서는 성능 저하 가능
   - 중요 뉴스 발표 시 일시 정지 권장

5. **서버 안정성**
   - 24시간 실행 시 안정적인 서버 필요
   - VPS 또는 항상 켜진 PC 권장

## 🔧 트러블슈팅

### API 연결 오류
```
❌ API 연결 실패
→ config.json의 API 키 확인
→ 업비트 Open API 권한 확인 (자산조회, 주문조회, 주문하기 필수)
```

### 잔고 부족
```
❌ 거래 가능 금액이 부족합니다
→ 최소 5,500원 이상 필요
→ 설정의 invest_ratio_per_coin 조정
```

### 코인 선정 실패
```
❌ 거래 가능한 코인이 없습니다
→ config.json의 coin_selection 기준 완화
→ min_volume_krw, min_volatility 값 조정
```

## 📞 지원

문제가 발생하면:
1. `logs/trading_bot.log` 파일 확인
2. 에러 메시지와 함께 문의

## 📜 라이선스

개인 사용 목적으로 자유롭게 사용 가능합니다.
상업적 이용 시 별도 문의 바랍니다.

## ⚖️ 면책 조항

- 이 프로그램은 교육 목적으로 제공됩니다
- 실제 투자에 따른 손실은 사용자 책임입니다
- 암호화폐 투자는 고위험 투자입니다
- 투자 전 충분한 학습과 테스트를 권장합니다
